{{ define "main" }}

<div style="margin-bottom:32px;">
  <h1 class="section-title" style="font-size:1.7rem;margin-bottom:8px;">ç ”ç©¶æˆæœ</h1>
  <p class="section-sub" style="margin-bottom:0;">
    å›¢é˜Ÿåœ¨ SPE Journalã€ã€ŠçŸ³æ²¹å­¦æŠ¥ã€‹ç­‰é«˜æ°´å¹³æœŸåˆŠä¸å›½é™…ä¼šè®®å‘è¡¨è®ºæ–‡ï¼Œå¹¶æ‰¿æ‹…å¤šé¡¹å›½å®¶åŠçœéƒ¨çº§ç§‘ç ”å¥–åŠ±é¡¹ç›®ã€‚
  </p>
</div>

{{- if .Content }}
<div class="post-content" style="margin-bottom:24px;">
  {{ .Content | markdownify }}
</div>
{{- end }}

<!-- ç²¾é€‰è®ºæ–‡ -->
{{ $featured := sort (where (where site.RegularPages "Section" "publications") "Params.featured" true) "Params.weight" }}
{{ if $featured }}
<h2 class="section-title" style="font-size:1.2rem;margin-bottom:20px;">â­ ä»£è¡¨æ€§è®ºæ–‡</h2>
<div style="margin-bottom:40px;">
  {{ range $i, $p := $featured }}
  <div class="pub-card">
    <div class="pub-index">{{ add $i 1 }}</div>
    <div class="pub-body">
      <a href="{{ $p.RelPermalink }}" class="pub-title">{{ $p.Title }}</a>
      <div class="pub-meta">
        {{ if $p.Params.journal }}<span class="pub-journal-badge">{{ $p.Params.journal }}</span>{{ end }}
        {{ if $p.Params.year }}<span class="pub-year">{{ $p.Params.year }}</span>{{ end }}
      </div>
    </div>
  </div>
  {{ end }}
</div>
{{ end }}

<!-- å…¨éƒ¨æˆæœåˆ—è¡¨ -->
<h2 class="section-title" style="font-size:1.2rem;margin-bottom:20px;">ğŸ“‹ å…¨éƒ¨æˆæœ</h2>

{{ $pages := where site.RegularPages "Section" "publications" }}
{{ $paginator := .Paginate $pages }}

<div style="display:flex;flex-direction:column;gap:0;">
{{ range $paginator.Pages }}
<div style="padding:14px 0;border-bottom:1px solid rgba(0,0,0,0.07);display:flex;align-items:baseline;gap:12px;">
  <span style="font-size:0.78rem;color:#888;white-space:nowrap;">{{ .Date.Format "2006" }}</span>
  <div>
    <a href="{{ .RelPermalink }}"
       style="font-size:0.97rem;color:#1a1a1a;text-decoration:none;font-weight:500;line-height:1.5;">
      {{ .Title }}
    </a>
    {{ if .Params.journal }}
    <span class="pub-journal-badge" style="margin-left:8px;font-size:0.75rem;">{{ .Params.journal }}</span>
    {{ end }}
  </div>
</div>
{{ end }}
</div>

<!-- åˆ†é¡µ -->
{{ if gt $paginator.TotalPages 1 }}
<div style="margin-top:30px;display:flex;gap:10px;align-items:center;">
  {{ if $paginator.HasPrev }}
  <a href="{{ $paginator.Prev.URL }}" class="btn-more" style="font-size:0.85rem;padding:7px 16px;">â† ä¸Šä¸€é¡µ</a>
  {{ end }}
  <span style="color:#888;font-size:0.88rem;">ç¬¬ {{ $paginator.PageNumber }} / {{ $paginator.TotalPages }} é¡µ</span>
  {{ if $paginator.HasNext }}
  <a href="{{ $paginator.Next.URL }}" class="btn-more" style="font-size:0.85rem;padding:7px 16px;">ä¸‹ä¸€é¡µ â†’</a>
  {{ end }}
</div>
{{ end }}

{{ end }}
